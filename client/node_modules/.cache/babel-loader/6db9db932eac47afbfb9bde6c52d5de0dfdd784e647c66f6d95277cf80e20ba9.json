{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams}from\"react-router-dom\";import{filterParams,fetchApi}from'../../utils';import{useNavigate,createSearchParams}from'react-router-dom';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";const Stockmarket=()=>{var _backendData$data;const[timeframe,setTimeFrame]=useState({});const[backendData,setBackendData]=useState({});const{symbol}=useParams();const navigate=useNavigate();const currentDate=new Date();const oneYearAgo=new Date(currentDate);oneYearAgo.setFullYear(currentDate.getFullYear()-1);console.log('Today:',currentDate.toISOString().slice(0,10));console.log('One year ago:',oneYearAgo.toISOString().slice(0,10));useEffect(()=>{const fetchData=async()=>{const queryparams=new URLSearchParams(window.location.search);const params=filterParams(queryparams);const apiUrl=\"http://127.0.0.1:5000/api/history?ticker=\".concat(symbol,\"&timeframe=\").concat(params.timeframe);const data=await fetchApi(apiUrl);if(!data){const default_params={timeframe:'1y'};console.log(\"No ticker of that name\");navigate({pathname:\"/stock/AAPL\",search:\"?\".concat(createSearchParams(default_params))});}else{setBackendData(data);console.log(backendData);}};fetchData();},[symbol]);return/*#__PURE__*/_jsx(\"div\",{children:(_backendData$data=backendData.data)===null||_backendData$data===void 0?void 0:_backendData$data.map((row,index)=>/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h5\",{children:[\"Stock : \",row.close]})},index))});};export default Stockmarket;","map":{"version":3,"names":["React","useEffect","useState","useParams","filterParams","fetchApi","useNavigate","createSearchParams","jsxs","_jsxs","jsx","_jsx","Stockmarket","_backendData$data","timeframe","setTimeFrame","backendData","setBackendData","symbol","navigate","currentDate","Date","oneYearAgo","setFullYear","getFullYear","console","log","toISOString","slice","fetchData","queryparams","URLSearchParams","window","location","search","params","apiUrl","concat","data","default_params","pathname","children","map","row","index","close"],"sources":["/home/cccc2184/Documents/Finance_node/client/src/components/Stockmarket/Stockmarket.js"],"sourcesContent":["import React, {useEffect, useState} from 'react'\r\nimport { useParams } from \"react-router-dom\"\r\nimport { filterParams, fetchApi } from '../../utils';\r\nimport { useNavigate, createSearchParams } from 'react-router-dom';\r\n\r\nconst Stockmarket = () => {\r\n  const [timeframe, setTimeFrame] = useState({}); \r\n\tconst [backendData, setBackendData] = useState ({});\r\n  const { symbol } = useParams();\r\n  const navigate = useNavigate()\r\n\tconst currentDate = new Date();\r\n\tconst oneYearAgo = new Date(currentDate);\r\n\toneYearAgo.setFullYear(currentDate.getFullYear() - 1);\r\n  \r\n\r\n\tconsole.log('Today:', currentDate.toISOString().slice(0, 10));\r\n\tconsole.log('One year ago:', oneYearAgo.toISOString().slice(0, 10));\r\n \t\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      const queryparams = new URLSearchParams(window.location.search);\r\n      const params = filterParams(queryparams);\r\n      const apiUrl = `http://127.0.0.1:5000/api/history?ticker=${symbol}&timeframe=${params.timeframe}`;\r\n      \r\n      const data = await fetchApi(apiUrl); \r\n      if (!data) {\r\n         const default_params = {timeframe : '1y',};\r\n         console.log(\"No ticker of that name\")\r\n         navigate({\r\n          pathname:`/stock/AAPL`,\r\n          search:`?${createSearchParams(default_params)}`, \r\n         });\r\n      }\r\n      else {\r\n        setBackendData(data)\r\n        console.log(backendData)\r\n      }\r\n\r\n    };\r\n\tfetchData();\r\n  }, [symbol]);\r\n\r\n\r\n\treturn(\r\n\t\t  <div>\r\n\t\t\t{backendData.data?.map((row, index) => (\r\n\t\t\t\t<div key={index}>\r\n\t\t\t\t  <h5>Stock : {row.close}</h5>\r\n\t\t\t\t</div>\r\n\t\t\t))}\r\n\t\t </div>\r\n        )\r\n    }\r\nexport default Stockmarket;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CAChD,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,OAASC,YAAY,CAAEC,QAAQ,KAAQ,aAAa,CACpD,OAASC,WAAW,CAAEC,kBAAkB,KAAQ,kBAAkB,CAAC,OAAAC,IAAA,IAAAC,KAAA,gCAAAC,GAAA,IAAAC,IAAA,yBAEnE,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,KAAAC,iBAAA,CACxB,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGb,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC/C,KAAM,CAACc,WAAW,CAAEC,cAAc,CAAC,CAAGf,QAAQ,CAAE,CAAC,CAAC,CAAC,CAClD,KAAM,CAAEgB,MAAO,CAAC,CAAGf,SAAS,CAAC,CAAC,CAC9B,KAAM,CAAAgB,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAC/B,KAAM,CAAAc,WAAW,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAC9B,KAAM,CAAAC,UAAU,CAAG,GAAI,CAAAD,IAAI,CAACD,WAAW,CAAC,CACxCE,UAAU,CAACC,WAAW,CAACH,WAAW,CAACI,WAAW,CAAC,CAAC,CAAG,CAAC,CAAC,CAGrDC,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAEN,WAAW,CAACO,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CAAC,CAC7DH,OAAO,CAACC,GAAG,CAAC,eAAe,CAAEJ,UAAU,CAACK,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CAAC,CAElE3B,SAAS,CAAC,IAAM,CACd,KAAM,CAAA4B,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,KAAM,CAAAC,WAAW,CAAG,GAAI,CAAAC,eAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAC/D,KAAM,CAAAC,MAAM,CAAG/B,YAAY,CAAC0B,WAAW,CAAC,CACxC,KAAM,CAAAM,MAAM,6CAAAC,MAAA,CAA+CnB,MAAM,gBAAAmB,MAAA,CAAcF,MAAM,CAACrB,SAAS,CAAE,CAEjG,KAAM,CAAAwB,IAAI,CAAG,KAAM,CAAAjC,QAAQ,CAAC+B,MAAM,CAAC,CACnC,GAAI,CAACE,IAAI,CAAE,CACR,KAAM,CAAAC,cAAc,CAAG,CAACzB,SAAS,CAAG,IAAK,CAAC,CAC1CW,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC,CACrCP,QAAQ,CAAC,CACRqB,QAAQ,cAAc,CACtBN,MAAM,KAAAG,MAAA,CAAK9B,kBAAkB,CAACgC,cAAc,CAAC,CAC9C,CAAC,CAAC,CACL,CAAC,IACI,CACHtB,cAAc,CAACqB,IAAI,CAAC,CACpBb,OAAO,CAACC,GAAG,CAACV,WAAW,CAAC,CAC1B,CAEF,CAAC,CACJa,SAAS,CAAC,CAAC,CACV,CAAC,CAAE,CAACX,MAAM,CAAC,CAAC,CAGb,mBACGP,IAAA,QAAA8B,QAAA,EAAA5B,iBAAA,CACAG,WAAW,CAACsB,IAAI,UAAAzB,iBAAA,iBAAhBA,iBAAA,CAAkB6B,GAAG,CAAC,CAACC,GAAG,CAAEC,KAAK,gBACjCjC,IAAA,QAAA8B,QAAA,cACEhC,KAAA,OAAAgC,QAAA,EAAI,UAAQ,CAACE,GAAG,CAACE,KAAK,EAAK,CAAC,EADpBD,KAEL,CACL,CAAC,CACG,CAAC,CAEL,CAAC,CACL,cAAe,CAAAhC,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}